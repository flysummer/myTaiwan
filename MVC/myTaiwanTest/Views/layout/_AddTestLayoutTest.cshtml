@*<!DOCTYPE html>

    <html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <title>@ViewBag.Title</title>
    </head>
    <body>
        <div>
            @RenderBody()
        </div>
    </body>
    </html>*@
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SocialMap</title>
    <meta charset="utf-8" />
    <link href="/assets-YiChun/css/header.css" rel="stylesheet" />
    <link href="/assets-YiChun/css/main.css" rel="stylesheet" />
    <!-- ↓d3↓ -->
    <script src="/assets-YiChun/js/d3.min.js"></script>
    <script src="/assets-YiChun/js/jquery-2.2.4.min.js"></script>
    <script src="/assets-YiChun/js/topojson.v2.min.js"></script>
    <script src="/assets-YiChun/js/d3MyTaiwan.js"></script>
    @*引用ckeditor.js*@
    <!-- ↓Add↓ -->
    <script src="/assets-YiChun/ckeditor/ckeditor.js"></script>
</head>
<body>
    <div class="header">
        <nav class="top-bar">
            <div>
                <ul class="title-area">
                    <li><img src="/assets-YiChun/images/header.png" class="logo" /></li>
                    <li><img src="/assets-YiChun/images/YC.jpg" class="logoface" /></li>
                    <li><label>@Session["userName"]</label></li>
                </ul>
            </div>
            <section>
                <ul>
                    <li class="section-icon"><a><img src="/assets-YiChun/images/logout.png" class="top-icon" /></a></li>
                    <li class="section-icon"><a><img src="/assets-YiChun/images/add.png" class="top-icon" /></a></li>
                    <li class="section-search">
                        <form action="" method="get">
                            <input type="button" class="search_map" />
                            <input type="text" class="search_text" placeholder="Search" />
                            <input type="submit" value="" class="search_button" />
                        </form>
                    </li>
                </ul>
            </section>
        </nav>
    </div>
    <div class="dynamicImageSpace">
        <!--        <img src="/assets-YiChun/images/high-resolutionImage.jpg" class="largeImage"/>-->
        <img src="/assets-YiChun/images/R0011094.jpg" class="largeImage" />
    </div>
    <div class="dynamicBodySpace">
        <div class="taiwanBar">
            <svg width="100%" height="575px"></svg>

        </div>
        @*原寫法*@
        @*<div class="addTextTable">
                <form name='form' action='#' method='post'>
                    <textarea name="myText" id="content" rows="10" cols="80"></textarea>
                    <input style="float:right" type='button' value='新增貼文' onclick='processData()'>
                </form>
            </div>*@
        @*新寫法*@
        <div>
            <form action="/add/UploadPicture" method="post" id="textForm">
                <label>標題：</label><input type="text" name="txtTitle" id="txtTitle" />
                @*textarea加上class="ckeditor"*@
                @Html.TextArea("myText", new { @class = "ckeditor", @rows = "10", @cols = "80" })
                <input style="float:right" type='button' value='新增貼文' onclick='processData()'>
            </form>
        </div>

    </div>
    @RenderBody()
    <!--↓d3↓  -->
    @*加入圖片上傳頁籤，放在頁面底下，放在頁面head區的話，會抓不到myText DOM*@
    <!-- ↓Add↓ -->
    <script>
        CKEDITOR.replace('myText', { filebrowserImageUploadUrl: '/add/UploadPicture' });
        CKEDITOR.config.height = 575;
        function processData() {
            // 原來的alert,(getting data),語法：CKEDITOR.instances.網頁元素ID.getData()
            var data = CKEDITOR.instances.myText.getData()
            var upLoad = {
                txtTitle: $("#txtTitle").val(),
                txtText: data
            }
            $.ajax({
                url: "/add/UploadText",
                type: "post",
                contentType:"application/json;charset=utf-8",
                success: function (data) {
                    window.location.href = "/signs/LogIn";
                },
                error: function (data) {
                    alert(data.message + "=> error");
                },
                data: JSON.stringify(upLoad)
            });

        }

    </script>
</body>
</html>
